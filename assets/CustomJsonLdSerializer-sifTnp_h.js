import{S as u}from"./index-BOvYCoiN.js";import{c as l}from"./rdf-editor-BIh2fq8w.js";import"./index-BfYWPPsp.js";class h{constructor(e){this.stream=e,this.array=[]}push(e){this.array.push(e)}end(){this.stream.push(this.array),this.stream.push(null)}}class o{constructor(e){this.stream=e,this.first=!0,this.stream.push("[")}push(e){this.first?this.first=!1:this.stream.push(","),this.stream.push(JSON.stringify(e))}end(){this.stream.push("]"),this.stream.push(null)}}class r extends l.Readable{constructor(e,{encoding:n="object"}={}){if(super({objectMode:!0,read:()=>{}}),n==="object"&&(this.encoder=new h(this)),n==="string"&&(this.encoder=new o(this)),!this.encoder)throw new Error(`unknown encoding: ${n}`);e.on("data",t=>{const s={};let a=s;t.graph.termType!=="DefaultGraph"&&(s["@id"]=t.graph.value,s["@graph"]={},a=s["@graph"]),a["@id"]=r.subjectValue(t.subject),t.predicate.value==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"?a["@type"]=r.subjectValue(t.object):a[t.predicate.value]=r.objectValue(t.object),this.encoder.push(s)}),e.on("end",()=>this.encoder.end()),e.on("error",t=>this.emit("error",t))}static subjectValue(e){return e.termType==="BlankNode"?"_:"+e.value:e.value}static objectValue(e){return e.termType==="NamedNode"?{"@id":e.value}:e.termType==="BlankNode"?{"@id":"_:"+e.value}:e.language?{"@language":e.language,"@value":e.value}:e.datatype&&e.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"?{"@type":e.datatype.value,"@value":e.value}:e.value}}class p extends u{constructor(e){super(r,e)}}class m extends p{constructor({...e}={}){super({encoding:"string",...e})}}export{m as default};
