import{r as _e}from"./index-Bk9Nd8TQ.js";import{b as be}from"./rdf-editor-BIh2fq8w.js";import{r as Se}from"./index-BOhJIny9.js";import"./index-BfYWPPsp.js";var H={},j={},X={},bt={},qt;function Ne(){return qt||(qt=1,function(n){/**
 * Character classes and associated utilities for the 5th edition of XML 1.0.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(n,"__esModule",{value:!0}),n.CHAR=`	
\r -퟿-�𐀀-􏿿`,n.S=` 	\r
`,n.NAME_START_CHAR=":A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�𐀀-󯿿",n.NAME_CHAR="-"+n.NAME_START_CHAR+".0-9·̀-ͯ‿-⁀",n.CHAR_RE=new RegExp("^["+n.CHAR+"]$","u"),n.S_RE=new RegExp("^["+n.S+"]+$","u"),n.NAME_START_CHAR_RE=new RegExp("^["+n.NAME_START_CHAR+"]$","u"),n.NAME_CHAR_RE=new RegExp("^["+n.NAME_CHAR+"]$","u"),n.NAME_RE=new RegExp("^["+n.NAME_START_CHAR+"]["+n.NAME_CHAR+"]*$","u"),n.NMTOKEN_RE=new RegExp("^["+n.NAME_CHAR+"]+$","u");var N=9,D=10,o=13,f=32;n.S_LIST=[f,D,o,N];function F(i){return i>=f&&i<=55295||i===D||i===o||i===N||i>=57344&&i<=65533||i>=65536&&i<=1114111}n.isChar=F;function u(i){return i===f||i===D||i===o||i===N}n.isS=u;function c(i){return i>=65&&i<=90||i>=97&&i<=122||i===58||i===95||i===8204||i===8205||i>=192&&i<=214||i>=216&&i<=246||i>=248&&i<=767||i>=880&&i<=893||i>=895&&i<=8191||i>=8304&&i<=8591||i>=11264&&i<=12271||i>=12289&&i<=55295||i>=63744&&i<=64975||i>=65008&&i<=65533||i>=65536&&i<=983039}n.isNameStartChar=c;function v(i){return c(i)||i>=48&&i<=57||i===45||i===46||i===183||i>=768&&i<=879||i>=8255&&i<=8256}n.isNameChar=v}(bt)),bt}var St={},Vt;function ge(){return Vt||(Vt=1,function(n){/**
 * Character classes and associated utilities for the 2nd edition of XML 1.1.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(n,"__esModule",{value:!0}),n.CHAR="-퟿-�𐀀-􏿿",n.RESTRICTED_CHAR="-\b\v\f---",n.S=` 	\r
`,n.NAME_START_CHAR=":A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�𐀀-󯿿",n.NAME_CHAR="-"+n.NAME_START_CHAR+".0-9·̀-ͯ‿-⁀",n.CHAR_RE=new RegExp("^["+n.CHAR+"]$","u"),n.RESTRICTED_CHAR_RE=new RegExp("^["+n.RESTRICTED_CHAR+"]$","u"),n.S_RE=new RegExp("^["+n.S+"]+$","u"),n.NAME_START_CHAR_RE=new RegExp("^["+n.NAME_START_CHAR+"]$","u"),n.NAME_CHAR_RE=new RegExp("^["+n.NAME_CHAR+"]$","u"),n.NAME_RE=new RegExp("^["+n.NAME_START_CHAR+"]["+n.NAME_CHAR+"]*$","u"),n.NMTOKEN_RE=new RegExp("^["+n.NAME_CHAR+"]+$","u");var N=9,D=10,o=13,f=32;n.S_LIST=[f,D,o,N];function F(s){return s>=1&&s<=55295||s>=57344&&s<=65533||s>=65536&&s<=1114111}n.isChar=F;function u(s){return s>=1&&s<=8||s===11||s===12||s>=14&&s<=31||s>=127&&s<=132||s>=134&&s<=159}n.isRestrictedChar=u;function c(s){return s===9||s===10||s===13||s>31&&s<127||s===133||s>159&&s<=55295||s>=57344&&s<=65533||s>=65536&&s<=1114111}n.isCharAndNotRestricted=c;function v(s){return s===f||s===D||s===o||s===N}n.isS=v;function i(s){return s>=65&&s<=90||s>=97&&s<=122||s===58||s===95||s===8204||s===8205||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}n.isNameStartChar=i;function r(s){return i(s)||s>=48&&s<=57||s===45||s===46||s===183||s>=768&&s<=879||s>=8255&&s<=8256}n.isNameChar=r}(St)),St}var Nt={},Ut;function Re(){return Ut||(Ut=1,function(n){/**
 * Character class utilities for XML NS 1.0 edition 3.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(n,"__esModule",{value:!0}),n.NC_NAME_START_CHAR="A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�𐀀-󯿿",n.NC_NAME_CHAR="-"+n.NC_NAME_START_CHAR+".0-9·̀-ͯ‿-⁀",n.NC_NAME_START_CHAR_RE=new RegExp("^["+n.NC_NAME_START_CHAR+"]$","u"),n.NC_NAME_CHAR_RE=new RegExp("^["+n.NC_NAME_CHAR+"]$","u"),n.NC_NAME_RE=new RegExp("^["+n.NC_NAME_START_CHAR+"]["+n.NC_NAME_CHAR+"]*$","u");function N(o){return o>=65&&o<=90||o===95||o>=97&&o<=122||o>=192&&o<=214||o>=216&&o<=246||o>=248&&o<=767||o>=880&&o<=893||o>=895&&o<=8191||o>=8204&&o<=8205||o>=8304&&o<=8591||o>=11264&&o<=12271||o>=12289&&o<=55295||o>=63744&&o<=64975||o>=65008&&o<=65533||o>=65536&&o<=983039}n.isNCNameStartChar=N;function D(o){return N(o)||o===45||o===46||o>=48&&o<=57||o===183||o>=768&&o<=879||o>=8255&&o<=8256}n.isNCNameChar=D}(Nt)),Nt}var Wt;function Ae(){if(Wt)return X;Wt=1,Object.defineProperty(X,"__esModule",{value:!0}),X.SaxesParser=X.EVENTS=void 0;const n=Ne(),N=ge(),D=Re();var o=n.isS,f=n.isChar,F=n.isNameStartChar,u=n.isNameChar,c=n.S_LIST,v=n.NAME_RE,i=N.isChar,r=D.isNCNameStartChar,s=D.isNCNameChar,d=D.NC_NAME_RE;const A="http://www.w3.org/XML/1998/namespace",C="http://www.w3.org/2000/xmlns/",y={__proto__:null,xml:A,xmlns:C},_={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},p=-1,g=-2,l=0,b=1,x=2,z=3,$=4,ot=5,ht=6,et=7,L=8,lt=9,ut=10,ct=11,dt=12,T=13,V=14,it=15,Rt=16,K=17,ft=18,Zt=19,Ft=20,Jt=21,te=22,ee=23,At=24,mt=25,st=26,Tt=27,ie=28,se=29,wt=30,ae=31,re=32,k=33,ne=34,pt=35,Y=36,xt=37,oe=38,Pt=39,It=40,he=41,vt=42,le=43,ue=44,Et=9,M=10,Dt=13,yt=32,$t=33,Mt=34,Z=38,Ot=39,at=45,rt=47,ce=59,O=60,U=61,R=62,w=63,Lt=91,W=93,kt=133,Bt=8232,nt=I=>I===Mt||I===Ot,Ht=[Mt,Ot],de=[...Ht,Lt,R],fe=[...Ht,O,W],Fe=[U,w,...c],me=[...c,R,Z,O];function Ct(I,t,e){switch(t){case"xml":e!==A&&I.fail(`xml prefix must be bound to ${A}.`);break;case"xmlns":e!==C&&I.fail(`xmlns prefix must be bound to ${C}.`);break}switch(e){case C:I.fail(t===""?`the default namespace may not be set to ${e}.`:`may not assign a prefix (even "xmlns") to the URI ${C}.`);break;case A:switch(t){case"xml":break;case"":I.fail(`the default namespace may not be set to ${e}.`);break;default:I.fail("may not assign the xml namespace to another prefix.")}break}}function pe(I,t){for(const e of Object.keys(t))Ct(I,e,t[e])}const xe=I=>d.test(I),Ee=I=>v.test(I),B=0,jt=1,_t=2;X.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const Xt={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};class De{get closed(){return this._closed}constructor(t){this.opt=t??{},this.fragmentOpt=!!this.opt.fragment;const e=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,e){this.nameStartCheck=r,this.nameCheck=s,this.isName=xe,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},y);const a=this.opt.additionalNamespaces;a!=null&&(pe(this,a),Object.assign(this.ns,a))}else this.nameStartCheck=F,this.nameCheck=u,this.isName=Ee,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}_init(){var t;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=B,this.attribList=[];const{fragmentOpt:e}=this;this.state=e?T:l,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=e,this.xmlDeclPossible=!e,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:a}=this.opt;if(a===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");a="1.0"}this.setXMLVersion(a),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(_),(t=this.readyHandler)===null||t===void 0||t.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(t,e){this[Xt[t]]=e}off(t){this[Xt[t]]=void 0}makeError(t){var e;let a=(e=this.fileName)!==null&&e!==void 0?e:"";return this.trackPosition&&(a.length>0&&(a+=":"),a+=`${this.line}:${this.column}`),a.length>0&&(a+=": "),new Error(a+t)}fail(t){const e=this.makeError(t),a=this.errorHandler;if(a===void 0)throw e;return a(e),this}write(t){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let e=!1;t===null?(e=!0,t=""):typeof t=="object"&&(t=t.toString()),this.carriedFromPrevious!==void 0&&(t=`${this.carriedFromPrevious}${t}`,this.carriedFromPrevious=void 0);let a=t.length;const h=t.charCodeAt(a-1);!e&&(h===Dt||h>=55296&&h<=56319)&&(this.carriedFromPrevious=t[a-1],a--,t=t.slice(0,a));const{stateTable:m}=this;for(this.chunk=t,this.i=0;this.i<a;)m[this.state].call(this);return this.chunkPosition+=a,e?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:t,i:e}=this;if(this.prevI=e,this.i=e+1,e>=t.length)return p;const a=t.charCodeAt(e);if(this.column++,a<55296){if(a>=yt||a===Et)return a;switch(a){case M:return this.line++,this.column=0,this.positionAtNewLine=this.position,M;case Dt:return t.charCodeAt(e+1)===M&&(this.i=e+2),this.line++,this.column=0,this.positionAtNewLine=this.position,g;default:return this.fail("disallowed character."),a}}if(a>56319)return a>=57344&&a<=65533||this.fail("disallowed character."),a;const h=65536+(a-55296)*1024+(t.charCodeAt(e+1)-56320);return this.i=e+2,h>1114111&&this.fail("disallowed character."),h}getCode11(){const{chunk:t,i:e}=this;if(this.prevI=e,this.i=e+1,e>=t.length)return p;const a=t.charCodeAt(e);if(this.column++,a<55296){if(a>31&&a<127||a>159&&a!==Bt||a===Et)return a;switch(a){case M:return this.line++,this.column=0,this.positionAtNewLine=this.position,M;case Dt:{const m=t.charCodeAt(e+1);(m===M||m===kt)&&(this.i=e+2)}case kt:case Bt:return this.line++,this.column=0,this.positionAtNewLine=this.position,g;default:return this.fail("disallowed character."),a}}if(a>56319)return a>=57344&&a<=65533||this.fail("disallowed character."),a;const h=65536+(a-55296)*1024+(t.charCodeAt(e+1)-56320);return this.i=e+2,h>1114111&&this.fail("disallowed character."),h}getCodeNorm(){const t=this.getCode();return t===g?M:t}unget(){this.i=this.prevI,this.column--}captureTo(t){let{i:e}=this;const{chunk:a}=this;for(;;){const h=this.getCode(),m=h===g,E=m?M:h;if(E===p||t.includes(E))return this.text+=a.slice(e,this.prevI),E;m&&(this.text+=`${a.slice(e,this.prevI)}
`,e=this.i)}}captureToChar(t){let{i:e}=this;const{chunk:a}=this;for(;;){let h=this.getCode();switch(h){case g:this.text+=`${a.slice(e,this.prevI)}
`,e=this.i,h=M;break;case p:return this.text+=a.slice(e),!1}if(h===t)return this.text+=a.slice(e,this.prevI),!0}}captureNameChars(){const{chunk:t,i:e}=this;for(;;){const a=this.getCode();if(a===p)return this.name+=t.slice(e),p;if(!u(a))return this.name+=t.slice(e,this.prevI),a===g?M:a}}skipSpaces(){for(;;){const t=this.getCodeNorm();if(t===p||!o(t))return t}}setXMLVersion(t){this.currentXMLVersion=t,t==="1.0"?(this.isChar=f,this.getCode=this.getCode10):(this.isChar=i,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=b}sBeginWhitespace(){const t=this.i,e=this.skipSpaces();switch(this.prevI!==t&&(this.xmlDeclPossible=!1),e){case O:if(this.state=it,this.text.length!==0)throw new Error("no-empty text at start");break;case p:break;default:this.unget(),this.state=T,this.xmlDeclPossible=!1}}sDoctype(){var t;const e=this.captureTo(de);switch(e){case R:{(t=this.doctypeHandler)===null||t===void 0||t.call(this,this.text),this.text="",this.state=T,this.doctype=!0;break}case p:break;default:this.text+=String.fromCodePoint(e),e===Lt?this.state=$:nt(e)&&(this.state=z,this.q=e)}}sDoctypeQuote(){const t=this.q;this.captureToChar(t)&&(this.text+=String.fromCodePoint(t),this.q=null,this.state=x)}sDTD(){const t=this.captureTo(fe);t!==p&&(this.text+=String.fromCodePoint(t),t===W?this.state=x:t===O?this.state=ht:nt(t)&&(this.state=ot,this.q=t))}sDTDQuoted(){const t=this.q;this.captureToChar(t)&&(this.text+=String.fromCodePoint(t),this.state=$,this.q=null)}sDTDOpenWaka(){const t=this.getCodeNorm();switch(this.text+=String.fromCodePoint(t),t){case $t:this.state=et,this.openWakaBang="";break;case w:this.state=ct;break;default:this.state=$}}sDTDOpenWakaBang(){const t=String.fromCodePoint(this.getCodeNorm()),e=this.openWakaBang+=t;this.text+=t,e!=="-"&&(this.state=e==="--"?L:$,this.openWakaBang="")}sDTDComment(){this.captureToChar(at)&&(this.text+="-",this.state=lt)}sDTDCommentEnding(){const t=this.getCodeNorm();this.text+=String.fromCodePoint(t),this.state=t===at?ut:L}sDTDCommentEnded(){const t=this.getCodeNorm();this.text+=String.fromCodePoint(t),t===R?this.state=$:(this.fail("malformed comment."),this.state=L)}sDTDPI(){this.captureToChar(w)&&(this.text+="?",this.state=dt)}sDTDPIEnding(){const t=this.getCodeNorm();this.text+=String.fromCodePoint(t),t===R&&(this.state=$)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:t}=this;const{chunk:e}=this;t:for(;;)switch(this.getCode()){case g:this.entity+=`${e.slice(t,this.prevI)}
`,t=this.i;break;case ce:{const{entityReturnState:a}=this,h=this.entity+e.slice(t,this.prevI);this.state=a;let m;h===""?(this.fail("empty entity name."),m="&;"):(m=this.parseEntity(h),this.entity=""),(a!==T||this.textHandler!==void 0)&&(this.text+=m);break t}case p:this.entity+=e.slice(t);break t}}sOpenWaka(){const t=this.getCode();if(F(t))this.state=ne,this.unget(),this.xmlDeclPossible=!1;else switch(t){case rt:this.state=le,this.xmlDeclPossible=!1;break;case $t:this.state=Rt,this.openWakaBang="",this.xmlDeclPossible=!1;break;case w:this.state=ee;break;default:this.fail("disallowed character in tag name"),this.state=T,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=Ft,this.openWakaBang="";break;case"--":this.state=K,this.openWakaBang="";break;case"DOCTYPE":this.state=x,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(at)&&(this.state=ft)}sCommentEnding(){var t;const e=this.getCodeNorm();e===at?(this.state=Zt,(t=this.commentHandler)===null||t===void 0||t.call(this,this.text),this.text=""):(this.text+=`-${String.fromCodePoint(e)}`,this.state=K)}sCommentEnded(){const t=this.getCodeNorm();t!==R?(this.fail("malformed comment."),this.text+=`--${String.fromCodePoint(t)}`,this.state=K):this.state=T}sCData(){this.captureToChar(W)&&(this.state=Jt)}sCDataEnding(){const t=this.getCodeNorm();t===W?this.state=te:(this.text+=`]${String.fromCodePoint(t)}`,this.state=Ft)}sCDataEnding2(){var t;const e=this.getCodeNorm();switch(e){case R:{(t=this.cdataHandler)===null||t===void 0||t.call(this,this.text),this.text="",this.state=T;break}case W:this.text+="]";break;default:this.text+=`]]${String.fromCodePoint(e)}`,this.state=Ft}}sPIFirstChar(){const t=this.getCodeNorm();this.nameStartCheck(t)?(this.piTarget+=String.fromCodePoint(t),this.state=At):t===w||o(t)?(this.fail("processing instruction without a target."),this.state=t===w?st:mt):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(t),this.state=At)}sPIRest(){const{chunk:t,i:e}=this;for(;;){const a=this.getCodeNorm();if(a===p){this.piTarget+=t.slice(e);return}if(!this.nameCheck(a)){this.piTarget+=t.slice(e,this.prevI);const h=a===w;h||o(a)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=h?k:Tt):this.state=h?st:mt:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(a));break}}}sPIBody(){if(this.text.length===0){const t=this.getCodeNorm();t===w?this.state=st:o(t)||(this.text=String.fromCodePoint(t))}else this.captureToChar(w)&&(this.state=st)}sPIEnding(){var t;const e=this.getCodeNorm();if(e===R){const{piTarget:a}=this;a.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(t=this.piHandler)===null||t===void 0||t.call(this,{target:a,body:this.text}),this.piTarget=this.text="",this.state=T}else e===w?this.text+="?":(this.text+=`?${String.fromCodePoint(e)}`,this.state=mt);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const t=this.skipSpaces();if(t===w){this.state=k;return}t!==p&&(this.state=ie,this.name=String.fromCodePoint(t))}sXMLDeclName(){const t=this.captureTo(Fe);if(t===w){this.state=k,this.name+=this.text,this.text="",this.fail("XML declaration is incomplete.");return}if(o(t)||t===U){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail(`expected one of ${this.xmlDeclExpects.join(", ")}`)}this.state=t===U?wt:se}}sXMLDeclEq(){const t=this.getCodeNorm();if(t===w){this.state=k,this.fail("XML declaration is incomplete.");return}o(t)||(t!==U&&this.fail("value required."),this.state=wt)}sXMLDeclValueStart(){const t=this.getCodeNorm();if(t===w){this.state=k,this.fail("XML declaration is incomplete.");return}o(t)||(nt(t)?this.q=t:(this.fail("value must be quoted."),this.q=yt),this.state=ae)}sXMLDeclValue(){const t=this.captureTo([this.q,w]);if(t===w){this.state=k,this.text="",this.fail("XML declaration is incomplete.");return}if(t===p)return;const e=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const a=e;this.xmlDecl.version=a,/^1\.[0-9]+$/.test(a)?this.opt.forceXMLVersion||this.setXMLVersion(a):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(e)||this.fail("encoding value must match 	/^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=e;break;case"standalone":e!=="yes"&&e!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=e;break}this.name="",this.state=re}sXMLDeclSeparator(){const t=this.getCodeNorm();if(t===w){this.state=k;return}o(t)||(this.fail("whitespace required."),this.unget()),this.state=Tt}sXMLDeclEnding(){var t;this.getCodeNorm()===R?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(t=this.xmldeclHandler)===null||t===void 0||t.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=T):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var t;const e=this.captureNameChars();if(e===p)return;const a=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=a.ns=Object.create(null)),(t=this.openTagStartHandler)===null||t===void 0||t.call(this,a),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),e){case R:this.openTag();break;case rt:this.state=pt;break;default:o(e)||this.fail("disallowed character in tag name."),this.state=Y}}sOpenTagSlash(){this.getCode()===R?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=Y)}sAttrib(){const t=this.skipSpaces();t!==p&&(F(t)?(this.unget(),this.state=xt):t===R?this.openTag():t===rt?this.state=pt:this.fail("disallowed character in attribute name."))}sAttribName(){const t=this.captureNameChars();t===U?this.state=Pt:o(t)?this.state=oe:t===R?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):t!==p&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const t=this.skipSpaces();switch(t){case p:return;case U:this.state=Pt;break;default:this.fail("attribute without value."),this.text="",this.name="",t===R?this.openTag():F(t)?(this.unget(),this.state=xt):(this.fail("disallowed character in attribute name."),this.state=Y)}}sAttribValue(){const t=this.getCodeNorm();nt(t)?(this.q=t,this.state=It):o(t)||(this.fail("unquoted attribute value."),this.state=vt,this.unget())}sAttribValueQuoted(){const{q:t,chunk:e}=this;let{i:a}=this;for(;;)switch(this.getCode()){case t:this.pushAttrib(this.name,this.text+e.slice(a,this.prevI)),this.name=this.text="",this.q=null,this.state=he;return;case Z:this.text+=e.slice(a,this.prevI),this.state=V,this.entityReturnState=It;return;case M:case g:case Et:this.text+=`${e.slice(a,this.prevI)} `,a=this.i;break;case O:this.text+=e.slice(a,this.prevI),this.fail("disallowed character.");return;case p:this.text+=e.slice(a);return}}sAttribValueClosed(){const t=this.getCodeNorm();o(t)?this.state=Y:t===R?this.openTag():t===rt?this.state=pt:F(t)?(this.fail("no whitespace between attributes."),this.unget(),this.state=xt):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const t=this.captureTo(me);switch(t){case Z:this.state=V,this.entityReturnState=vt;break;case O:this.fail("disallowed character.");break;case p:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",t===R?this.openTag():this.state=Y}}sCloseTag(){const t=this.captureNameChars();t===R?this.closeTag():o(t)?this.state=ue:t!==p&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case R:this.closeTag();break;case p:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:t,forbiddenState:e}=this;const{chunk:a,textHandler:h}=this;t:for(;;)switch(this.getCode()){case O:{if(this.state=it,h!==void 0){const{text:m}=this,E=a.slice(t,this.prevI);m.length!==0?(h(m+E),this.text=""):E.length!==0&&h(E)}e=B;break t}case Z:this.state=V,this.entityReturnState=T,h!==void 0&&(this.text+=a.slice(t,this.prevI)),e=B;break t;case W:switch(e){case B:e=jt;break;case jt:e=_t;break;case _t:break;default:throw new Error("impossible state")}break;case R:e===_t&&this.fail('the string "]]>" is disallowed in char data.'),e=B;break;case g:h!==void 0&&(this.text+=`${a.slice(t,this.prevI)}
`),t=this.i,e=B;break;case p:h!==void 0&&(this.text+=a.slice(t));break t;default:e=B}this.forbiddenState=e}handleTextOutsideRoot(){let{i:t}=this;const{chunk:e,textHandler:a}=this;let h=!1;t:for(;;){const m=this.getCode();switch(m){case O:{if(this.state=it,a!==void 0){const{text:E}=this,P=e.slice(t,this.prevI);E.length!==0?(a(E+P),this.text=""):P.length!==0&&a(P)}break t}case Z:this.state=V,this.entityReturnState=T,a!==void 0&&(this.text+=e.slice(t,this.prevI)),h=!0;break t;case g:a!==void 0&&(this.text+=`${e.slice(t,this.prevI)}
`),t=this.i;break;case p:a!==void 0&&(this.text+=e.slice(t));break t;default:o(m)||(h=!0)}}h&&(!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(t,e){var a;const{prefix:h,local:m}=this.qname(t),E={name:t,prefix:h,local:m,value:e};if(this.attribList.push(E),(a=this.attributeHandler)===null||a===void 0||a.call(this,E),h==="xmlns"){const P=e.trim();this.currentXMLVersion==="1.0"&&P===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[m]=P,Ct(this,m,P)}else if(t==="xmlns"){const P=e.trim();this.topNS[""]=P,Ct(this,"",P)}}pushAttribPlain(t,e){var a;const h={name:t,value:e};this.attribList.push(h),(a=this.attributeHandler)===null||a===void 0||a.call(this,h)}end(){var t,e;this.sawRoot||this.fail("document must contain a root element.");const{tags:a}=this;for(;a.length>0;){const m=a.pop();this.fail(`unclosed tag: ${m.name}`)}this.state!==l&&this.state!==T&&this.fail("unexpected end.");const{text:h}=this;return h.length!==0&&((t=this.textHandler)===null||t===void 0||t.call(this,h),this.text=""),this._closed=!0,(e=this.endHandler)===null||e===void 0||e.call(this),this._init(),this}resolve(t){var e,a;let h=this.topNS[t];if(h!==void 0)return h;const{tags:m}=this;for(let E=m.length-1;E>=0;E--)if(h=m[E].ns[t],h!==void 0)return h;return h=this.ns[t],h!==void 0?h:(a=(e=this.opt).resolvePrefix)===null||a===void 0?void 0:a.call(e,t)}qname(t){const e=t.indexOf(":");if(e===-1)return{prefix:"",local:t};const a=t.slice(e+1),h=t.slice(0,e);return(h===""||a===""||a.includes(":"))&&this.fail(`malformed name: ${t}.`),{prefix:h,local:a}}processAttribsNS(){var t;const{attribList:e}=this,a=this.tag;{const{prefix:E,local:P}=this.qname(a.name);a.prefix=E,a.local=P;const G=a.uri=(t=this.resolve(E))!==null&&t!==void 0?t:"";E!==""&&(E==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),G===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(E)}.`),a.uri=E))}if(e.length===0)return;const{attributes:h}=a,m=new Set;for(const E of e){const{name:P,prefix:G,local:Ce}=E;let Q,J;G===""?(Q=P==="xmlns"?C:"",J=P):(Q=this.resolve(G),Q===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(G)}.`),Q=G),J=`{${Q}}${Ce}`),m.has(J)&&this.fail(`duplicate attribute: ${J}.`),m.add(J),E.uri=Q,h[P]=E}this.attribList=[]}processAttribsPlain(){const{attribList:t}=this,e=this.tag.attributes;for(const{name:a,value:h}of t)e[a]!==void 0&&this.fail(`duplicate attribute: ${a}.`),e[a]=h;this.attribList=[]}openTag(){var t;this.processAttribs();const{tags:e}=this,a=this.tag;a.isSelfClosing=!1,(t=this.openTagHandler)===null||t===void 0||t.call(this,a),e.push(a),this.state=T,this.name=""}openSelfClosingTag(){var t,e,a;this.processAttribs();const{tags:h}=this,m=this.tag;m.isSelfClosing=!0,(t=this.openTagHandler)===null||t===void 0||t.call(this,m),(e=this.closeTagHandler)===null||e===void 0||e.call(this,m),(this.tag=(a=h[h.length-1])!==null&&a!==void 0?a:null)===null&&(this.closedRoot=!0),this.state=T,this.name=""}closeTag(){const{tags:t,name:e}=this;if(this.state=T,this.name="",e===""){this.fail("weird empty close tag."),this.text+="</>";return}const a=this.closeTagHandler;let h=t.length;for(;h-- >0;){const m=this.tag=t.pop();if(this.topNS=m.ns,a==null||a(m),m.name===e)break;this.fail("unexpected close tag.")}h===0?this.closedRoot=!0:h<0&&(this.fail(`unmatched closing tag: ${e}.`),this.text+=`</${e}>`)}parseEntity(t){if(t[0]!=="#"){const a=this.ENTITIES[t];return a!==void 0?a:(this.fail(this.isName(t)?"undefined entity.":"disallowed character in entity name."),`&${t};`)}let e=NaN;return t[1]==="x"&&/^#x[0-9a-f]+$/i.test(t)?e=parseInt(t.slice(2),16):/^#[0-9]+$/.test(t)&&(e=parseInt(t.slice(1),10)),this.isChar(e)?String.fromCodePoint(e):(this.fail("malformed character entity."),`&${t};`)}}return X.SaxesParser=De,X}var tt={},Gt;function Te(){if(Gt)return tt;Gt=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.ParseError=void 0;let n=class extends Error{constructor(D,o){const f=D.saxParser;super(D.trackPosition?`Line ${f.line} column ${f.column+1}: ${o}`:o)}};return tt.ParseError=n,tt}var q={},gt={},Qt;function we(){return Qt||(Qt=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateIri=n.IriValidationStrategy=void 0;function N(){const c="[!$&'()*+,;=]",v="%[a-fA-F0-9]{2}",i="([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",r=`${i}\\.${i}\\.${i}\\.${i}`,s="[a-fA-F0-9]{1,4}",d=`(${s}:${s}|${r})`,A=`((${s}:){6}${d}|::(${s}:){5}${d}|(${s})?::(${s}:){4}${d}|((${s}:){0,1}${s})?::(${s}:){3}${d}|((${s}:){0,2}${s})?::(${s}:){2}${d}|((${s}:){0,3}${s})?::${s}:${d}|((${s}:){0,4}${s})?::${d}|((${s}:){0,5}${s})?::${s}|((${s}:){0,6}${s})?::)`,C=`v[a-fA-F0-9]+\\.(${c}|${c}|":)+`,y=`\\[(${A}|${C})\\]`,_="[0-9]*",p="[a-zA-Z][a-zA-Z0-9+\\-.]*",l="[-󰀀-󿿽􀀀-􏿽]",z="[a-zA-Z0-9\\-._~ -퟿豈-﷏ﷰ-￯𐀀-🿽𠀀-𯿽𰀀-𿿽񀀀-񏿽񐀀-񟿽񠀀-񯿽񰀀-񿿽򀀀-򏿽򐀀-򟿽򠀀-򯿽򰀀-򿿽󀀀-󏿽󐀀-󟿽󡀀-󯿽]",$=`(${z}|${v}|${c}|[:@])*`,ot=`(${$}|[\\/?])*`,ht=`(${$}|${l}|[\\/?])*`,et=`(${$})+`,L=`(${$})*`,lt="",ut=`${et}(\\/${L})*`,ct=`\\/(${et}(\\/${L})*)?`,dt=`(\\/${L})*`,T=`(${z}|${v}|${c})*`,V=`(${y}|${r}|${T})`,K=`(\\/\\/${`(${`(${z}|${v}|${c}|:)*`}@)?${V}(:${_})?`}${dt}|${ct}|${ut}|${lt})`,ft=`^${p}:${K}(\\?${ht})?(#${ot})?$`;return new RegExp(ft,"u")}const D=N(),o=/^[A-Za-z][\d+-.A-Za-z]*:[^\u0000-\u0020"<>\\^`{|}]*$/u;var f;(function(u){u.Strict="strict",u.Pragmatic="pragmatic",u.None="none"})(f=n.IriValidationStrategy||(n.IriValidationStrategy={}));function F(u,c=f.Strict){switch(c){case f.Strict:return D.test(u)?void 0:new Error(`Invalid IRI according to RFC 3987: '${u}'`);case f.Pragmatic:return o.test(u)?void 0:new Error(`Invalid IRI according to RDF Turtle: '${u}'`);case f.None:return;default:return new Error(`Not supported validation strategy "${c}"`)}}n.validateIri=F}(gt)),gt}var zt;function Pe(){return zt||(zt=1,function(n){var N=q&&q.__createBinding||(Object.create?function(o,f,F,u){u===void 0&&(u=F);var c=Object.getOwnPropertyDescriptor(f,F);(!c||("get"in c?!f.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return f[F]}}),Object.defineProperty(o,u,c)}:function(o,f,F,u){u===void 0&&(u=F),o[u]=f[F]}),D=q&&q.__exportStar||function(o,f){for(var F in o)F!=="default"&&!Object.prototype.hasOwnProperty.call(f,F)&&N(f,o,F)};Object.defineProperty(n,"__esModule",{value:!0}),D(we(),n)}(q)),q}var Kt;function Ie(){if(Kt)return j;Kt=1,Object.defineProperty(j,"__esModule",{value:!0}),j.ParseType=j.RdfXmlParser=void 0;const n=_e(),N=Ae(),D=be(),o=Te(),f=Se(),F=Pe();let u=class S extends D.Transform{constructor(i){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},i&&(Object.assign(this,i),this.options=i),this.dataFactory||(this.dataFactory=new f.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.validateUri!==!1&&(this.validateUri=!0),this.iriValidationStrategy||(this.iriValidationStrategy=this.validateUri?F.IriValidationStrategy.Pragmatic:F.IriValidationStrategy.None),this.saxParser=new N.SaxesParser({xmlns:!0,position:this.trackPosition}),this.attachSaxListeners()}import(i){const r=new D.PassThrough({readableObjectMode:!0});i.on("error",d=>s.emit("error",d)),i.on("data",d=>r.push(d)),i.on("end",()=>r.push(null));const s=r.pipe(new S(this.options));return s}_transform(i,r,s){try{this.saxParser.write(i)}catch(d){return s(d)}s()}newParseError(i){return new o.ParseError(this,i)}valueToUri(i,r){return this.uriToNamedNode((0,n.resolve)(i,r.baseIRI))}uriToNamedNode(i){const r=(0,F.validateIri)(i,this.iriValidationStrategy);if(r instanceof Error)throw this.newParseError(r.message);return this.dataFactory.namedNode(i)}validateNcname(i){if(!S.NCNAME_MATCHER.test(i))throw this.newParseError(`Not a valid NCName: ${i}`)}attachSaxListeners(){this.saxParser.on("error",i=>this.emit("error",i)),this.saxParser.on("opentag",this.onTag.bind(this)),this.saxParser.on("text",this.onText.bind(this)),this.saxParser.on("cdata",this.onText.bind(this)),this.saxParser.on("closetag",this.onCloseTag.bind(this)),this.saxParser.on("doctype",this.onDoctype.bind(this))}onTag(i){const r=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let s=c.RESOURCE;if(r&&(r.hadChildren=!0,s=r.childrenParseType),r&&r.childrenStringTags){const A=i.name;let C="";for(const g in i.attributes)C+=` ${g}="${i.attributes[g].value}"`;const _=`<${`${A}${C}`}>`;r.childrenStringTags.push(_);const p={childrenStringTags:r.childrenStringTags};p.childrenStringEmitClosingTag=`</${A}>`,this.activeTagStack.push(p);return}const d={};r?(d.language=r.language,d.baseIRI=r.baseIRI):d.baseIRI=this.baseIRI,this.activeTagStack.push(d),s===c.RESOURCE?this.onTagResource(i,d,r,!r):this.onTagProperty(i,d,r)}onTagResource(i,r,s,d){r.childrenParseType=c.PROPERTY;let A=!0;if(i.uri===S.RDF){if(!d&&S.FORBIDDEN_NODE_ELEMENTS.indexOf(i.local)>=0)throw this.newParseError(`Illegal node element name: ${i.local}`);switch(i.local){case"RDF":r.childrenParseType=c.RESOURCE;case"Description":A=!1}}const C=[],y=[];let _=null,p=!1,g=!1,l=null;for(const b in i.attributes){const x=i.attributes[b];if(s&&x.uri===S.RDF)switch(x.local){case"about":if(_)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${x.value} and ${_} where found.`);_=x.value;continue;case"ID":if(_)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${x.value} and ${_} where found.`);this.validateNcname(x.value),_="#"+x.value,p=!0;continue;case"nodeID":if(_)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${x.value} and ${_} where found.`);this.validateNcname(x.value),_=x.value,g=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":l=x.value;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(x.uri===S.XML){if(x.local==="lang"){r.language=x.value===""?null:x.value.toLowerCase();continue}else if(x.local==="base"){r.baseIRI=(0,n.resolve)(x.value,r.baseIRI);continue}}x.prefix!=="xml"&&x.prefix!=="xmlns"&&(x.prefix!==""||x.local!=="xmlns")&&x.uri&&(C.push(this.uriToNamedNode(x.uri+x.local)),y.push(x.value))}if(_!==null&&(r.subject=g?this.dataFactory.blankNode(_):this.valueToUri(_,r),p&&this.claimNodeId(r.subject)),r.subject||(r.subject=this.dataFactory.blankNode()),A){const b=this.uriToNamedNode(i.uri+i.local);this.emitTriple(r.subject,this.dataFactory.namedNode(S.RDF+"type"),b,s?s.reifiedStatementId:null)}if(s){if(s.predicate)if(s.childrenCollectionSubject){const b=this.dataFactory.blankNode();this.emitTriple(s.childrenCollectionSubject,s.childrenCollectionPredicate,b,s.reifiedStatementId),this.emitTriple(b,this.dataFactory.namedNode(S.RDF+"first"),r.subject,r.reifiedStatementId),s.childrenCollectionSubject=b,s.childrenCollectionPredicate=this.dataFactory.namedNode(S.RDF+"rest")}else{this.emitTriple(s.subject,s.predicate,r.subject,s.reifiedStatementId);for(let b=0;b<s.predicateSubPredicates.length;b++)this.emitTriple(r.subject,s.predicateSubPredicates[b],s.predicateSubObjects[b],null);s.predicateSubPredicates=[],s.predicateSubObjects=[],s.predicateEmitted=!0}for(let b=0;b<C.length;b++){const x=this.dataFactory.literal(y[b],r.datatype||r.language);this.emitTriple(r.subject,C[b],x,s.reifiedStatementId)}l&&this.emitTriple(r.subject,this.dataFactory.namedNode(S.RDF+"type"),this.uriToNamedNode(l),null)}}onTagProperty(i,r,s){if(r.childrenParseType=c.RESOURCE,r.subject=s.subject,i.uri===S.RDF&&i.local==="li"?(s.listItemCounter||(s.listItemCounter=1),r.predicate=this.uriToNamedNode(i.uri+"_"+s.listItemCounter++)):r.predicate=this.uriToNamedNode(i.uri+i.local),i.uri===S.RDF&&S.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(i.local)>=0)throw this.newParseError(`Illegal property element name: ${i.local}`);r.predicateSubPredicates=[],r.predicateSubObjects=[];let d=!1,A=!1,C=null,y=!0;const _=[],p=[];for(const g in i.attributes){const l=i.attributes[g];if(l.uri===S.RDF)switch(l.local){case"resource":if(C)throw this.newParseError(`Found both rdf:resource (${l.value}) and rdf:nodeID (${C}).`);if(d)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${l.value})`);r.hadChildren=!0,C=l.value,y=!1;continue;case"datatype":if(A)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${l.value}).`);if(d)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${l.value})`);r.datatype=this.valueToUri(l.value,r);continue;case"nodeID":if(A)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${l.value}).`);if(r.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${l.value}).`);if(d)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${l.value})`);this.validateNcname(l.value),r.hadChildren=!0,C=l.value,y=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(A)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(r.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${r.datatype.value})`);if(C)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${C})`);if(l.value==="Resource"){d=!0,r.childrenParseType=c.PROPERTY;const b=this.dataFactory.blankNode();this.emitTriple(r.subject,r.predicate,b,r.reifiedStatementId),r.subject=b,r.predicate=null}else l.value==="Collection"?(d=!0,r.hadChildren=!0,r.childrenCollectionSubject=r.subject,r.childrenCollectionPredicate=r.predicate,y=!1):l.value==="Literal"&&(d=!0,r.childrenTagsToString=!0,r.childrenStringTags=[]);continue;case"ID":this.validateNcname(l.value),r.reifiedStatementId=this.valueToUri("#"+l.value,r),this.claimNodeId(r.reifiedStatementId);continue}else if(l.uri===S.XML&&l.local==="lang"){r.language=l.value===""?null:l.value.toLowerCase();continue}if(l.prefix!=="xml"&&l.prefix!=="xmlns"&&(l.prefix!==""||l.local!=="xmlns")&&l.uri){if(d||r.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${l.value}`);r.hadChildren=!0,A=!0,_.push(this.uriToNamedNode(l.uri+l.local)),p.push(this.dataFactory.literal(l.value,r.datatype||r.language))}}if(C!==null){const g=r.subject;r.subject=y?this.dataFactory.blankNode(C):this.valueToUri(C,r),this.emitTriple(g,r.predicate,r.subject,r.reifiedStatementId);for(let l=0;l<_.length;l++)this.emitTriple(r.subject,_[l],p[l],null);r.predicateEmitted=!0}else y&&(r.predicateSubPredicates=_,r.predicateSubObjects=p,r.predicateEmitted=!1)}emitTriple(i,r,s,d){this.push(this.dataFactory.quad(i,r,s,this.defaultGraph)),d&&(this.push(this.dataFactory.quad(d,this.dataFactory.namedNode(S.RDF+"type"),this.dataFactory.namedNode(S.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(d,this.dataFactory.namedNode(S.RDF+"subject"),i,this.defaultGraph)),this.push(this.dataFactory.quad(d,this.dataFactory.namedNode(S.RDF+"predicate"),r,this.defaultGraph)),this.push(this.dataFactory.quad(d,this.dataFactory.namedNode(S.RDF+"object"),s,this.defaultGraph)))}claimNodeId(i){if(!this.allowDuplicateRdfIds){if(this.nodeIds[i.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${i.value}'.`);this.nodeIds[i.value]=!0}}onText(i){const r=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;r&&(r.childrenStringTags?r.childrenStringTags.push(i):r.predicate&&(r.text=i))}onCloseTag(){const i=this.activeTagStack.pop();if(i.childrenStringEmitClosingTag&&i.childrenStringTags.push(i.childrenStringEmitClosingTag),i.childrenTagsToString&&(i.datatype=this.dataFactory.namedNode(S.RDF+"XMLLiteral"),i.text=i.childrenStringTags.join(""),i.hadChildren=!1),i.childrenCollectionSubject)this.emitTriple(i.childrenCollectionSubject,i.childrenCollectionPredicate,this.dataFactory.namedNode(S.RDF+"nil"),i.reifiedStatementId);else if(i.predicate){if(!i.hadChildren&&i.childrenParseType!==c.PROPERTY)this.emitTriple(i.subject,i.predicate,this.dataFactory.literal(i.text||"",i.datatype||i.language),i.reifiedStatementId);else if(!i.predicateEmitted){const r=this.dataFactory.blankNode();this.emitTriple(i.subject,i.predicate,r,i.reifiedStatementId);for(let s=0;s<i.predicateSubPredicates.length;s++)this.emitTriple(r,i.predicateSubPredicates[s],i.predicateSubObjects[s],null)}}}onDoctype(i){i.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(r,s,d)=>(this.saxParser.ENTITIES[s]=d,""))}};j.RdfXmlParser=u,u.MIME_TYPE="application/rdf+xml",u.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",u.XML="http://www.w3.org/XML/1998/namespace",u.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],u.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],u.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u;var c;return function(v){v[v.RESOURCE=0]="RESOURCE",v[v.PROPERTY=1]="PROPERTY"}(c||(j.ParseType=c={})),j}var Yt;function ve(){return Yt||(Yt=1,function(n){var N=H&&H.__createBinding||(Object.create?function(o,f,F,u){u===void 0&&(u=F);var c=Object.getOwnPropertyDescriptor(f,F);(!c||("get"in c?!f.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return f[F]}}),Object.defineProperty(o,u,c)}:function(o,f,F,u){u===void 0&&(u=F),o[u]=f[F]}),D=H&&H.__exportStar||function(o,f){for(var F in o)F!=="default"&&!Object.prototype.hasOwnProperty.call(f,F)&&N(f,o,F)};Object.defineProperty(n,"__esModule",{value:!0}),D(Ie(),n)}(H)),H}var ye=ve();class Be extends ye.RdfXmlParser{constructor({factory:N,...D}={}){super({...D,dataFactory:N})}}export{Be as default};
